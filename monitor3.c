// need file libdos.c to be compile in directory
//bcc -x -i -L -Md hello.c -o HELLO.COM
#define varn 0x0080
#define stdout 0 
#define lpt 2 
#define com1 3 
#define blue 0x19
#define lscr1 40
#define lscr3 80
int ii;
void putc(cc,color);
void puts(s,color);
void screens(n);
int colorsbc(backsc,forec);
void paints(x,y,color,size);
void locate(x,y);
void putsn(x,y,s,color,size);

int main(){
	int n=0;
	screens(0x1);
	for(n=0;n<8;n++){
		putsn(0,n,"hello world ",colorsbc(n,n+8),11);
	}
			asm	"db 0xb4,0,0xcd,0x21";
		
	return 0;
}

int colorsbc(backsc,forec)
int backsc;
int forec;
{
	return (backsc << 4) | forec;
}


void puts(s,color)
char *s;
int color;
{
	int n=0;
	for(n=0;n<32008;n++){
		putc(s[n],color);
		if(s[n]==0)n=32016;
	}
}

void putc(cc,color)
char cc;
int color;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = cc;
	*(c + 1) = color;

	asm	"db 0x1E,0x06,0x2E,0xA0,0x80,0x00,0x2E,0x8A,0x1E,0x82,0x00,0xB7,0x00,0xB9,0x01,0x00,0xB4,0x0A,0xCD,0x10,0xB4,0x03,0xCD,0x10,0xB7,0x00,0xFE,0xC2,0xB4,0x02,0xCD,0x10,0x90,0x07,0x1F";
}

void paints(x,y,color,size)
int x;
int y;
int color;
int size;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = (y*(lscr1*2))+(x*2)+1;
	*(c + 1) = color;
	*(c + 2) = size;

	asm	"db 0x1E,0x06,0x2E,0x8B,0x3E,0x80,0x00,0x2E,0xA0,0x82,0x00,0x2E,0x8B,0x0E,0x84,0x00,0xBA,0x00,0xB8,0x8E,0xC2,0x90,0x26,0x88,0x05,0xF8,0x83,0xC7,0x02,0x49,0x83,0xF9,0x00,0x75,0xF2,0x07,0x1F";
}

void screens(n)
int n;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = n;


	asm	"db 0x1E,0x56,0x8C,0xC8,0x8E,0xD8,0xBE,0x80,0x00,0x2E,0x8A,0x04,0xB4,0x00,0xCD,0x10,0x5E,0x1F";
}


void locate(x,y)
int x;
int y;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = x;
	*(c + 1) = y;


	asm	"db 0x1E,0x06,0x2E,0x8A,0x16,0x80,0x00,0x2E,0x8A,0x36,0x82,0x00,0xB7,0x00,0xB4,0x02,0xCD,0x10,0x90,0x07,0x1F";
}


void putsn(x,y,s,color,size)
int x;
int y;
char *s;
int color;
int size;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = x;
	*(c + 1) = y;
	*(c + 2) = s;
	*(c + 3) = color;
	*(c + 4) = size;


	asm	"db 0x1E,0x06,0x50,0x53,0x51,0x52,0x56,0x57,0x0E,0x07,0x2E,0x8A,0x16,0x80,0x00,0x2E,0x8A,0x36,0x82,0x00,0x2E,0x8B,0x36,0x84,0x00,0x2E,0x8A,0x1E,0x86,0x00,0x2E,0x8B,0x0E,0x88,0x00,0xB7,0x00,0xB0,0x01,0xB4,0x13,0x55,0x89,0xF5,0xCD,0x10,0x5D,0x90,0x5F,0x5E,0x5A,0x59,0x5B,0x58,0x07,0x1F";
}
