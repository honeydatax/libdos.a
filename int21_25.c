// need file libdos.c to be compile in directory
//bcc -x -i -L -Md hello.c -o HELLO.COM
#define varn 0x0080
char ccc;
char cc;
int ii;
int getvet(cc,segs);
void setvet(cc,seg,offs);
void sputc(cc);
void sputs(cc);

int main(){
	int ints=0xf1;
	int *segs;
	int offs;
	offs=getvet(0x21,&segs);
	setvet(ints,ii,offs);
	sputs("hello world\r\n");
		asm	"db 0xb4,0,0xcd,0x21";
		
	return 0;
}

int getvet(cc,segs)
int cc;
int *segs;
{
	int *c;
	int segs1;
	int offs1;
	c = (int * ) varn;
	*(c + 0) = cc;
	asm	"db 0x06,0xbb,0x80,0x0,0x2e,0x8a,0x07,0xb4,0x35,0xcd,0x21,0xbe,0x80,0x0,0x8c,0xc0,0x2e,0x89,0x04,0x46,0x46,0x2e,0x89,0x1c,0x07";
	segs1=*(c + 0);
	offs1=*(c + 1);
	ii=segs1;
	return offs1;
}
void setvet(cc,seg,offs)
char cc;
int seg;
int offs;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = cc;
	*(c + 1) = seg;
	*(c + 2) = offs;

	asm	"db 0x1e,0xbe,0x80,0x00,0x2e,0x8a,0x04,0x46,0x46,0x2e,0x8b,0x14,0x8e,0xda,0x46,0x46,0x2e,0x8b,0x14,0xb4,0x25,0xcd,0x21,0x1f";
}



void sputc(cc)
char cc;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = cc;

	asm	"db 0xbb,0x80,0x0,0x2e,0x8a,0x17,0xb4,0x02,0xcd,0xf1";
}

void sputs(cc)
char *cc;
{
		int i=0;
while(cc[i]!=0){
		sputc(cc[i]);
		i++;
}
}

