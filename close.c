// need file libdos.c to be compile in directory
//bcc -x -i -L -Md hello.c -o HELLO.COM
#define varn 0x0080
#define stdout 	0 
#define stdin 	1 
#define lpt 	2 
#define com1 	3 
#define ferror 	255 
int ii;
void close(n);
int open(s);
void read(file,s,size);
void sputs(cc);

int main(){
	int f1=0;
	char var1[80];
	char *vars;
	vars=var1;
	f1=open("MY");
	if(f1!=ferror){
		read(f1,vars,13);
		sputs("\r\n\r\n$");
		sputs(vars);
		sputs("\r\n\r\n$");
		close(f1);
	}else{
		sputs("file error\r\n\r\n$");
	}
	
	
		asm	"db 0xb4,0,0xcd,0x21";
		
	return 0;
}

void close(n)
int n;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = n;
	
	

	asm	"db 0x1E,0x56,0x8C,0xC8,0x8E,0xD8,0xBE,0x80,0x00,0x2E,0x8B,0x1C,0xB4,0x3E,0xCD,0x21,0x5E,0x1F";
}



int open(s)
char *s;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = s;
	
	

	asm	"db 0x1E,0x56,0x8C,0xC8,0x8E,0xD8,0xBE,0x80,0x00,0x2E,0x8B,0x14,0xB4,0x3D,0xBE,0x80,0x00,0xCD,0x21,0x2E,0x89,0x04,0x5E,0x1F";
	return *(c + 0);
}

void read(file,s,size)
int file;
char *s;
int size;
{
	int *c;
	c = (int * ) varn;
	*(c + 0) = file;
	*(c + 1) = s;
	*(c + 2) = size;

	asm	"db 0x1E,0x56,0x8C,0xC8,0x8E,0xD8,0xBE,0x80,0x00,0x2E,0x8B,0x1C,0x46,0x46,0x2E,0x8B,0x14,0x46,0x46,0x2E,0x8B,0x0C,0xB4,0x3F,0xCD,0x21,0x5E,0x1F";
}

void sputs(cc)
char *cc;
{
	int *c;
	int i;
	c = (int * ) varn;
	*(c + 0) = cc;

	asm	"db 0xbb,0x80,0x0,0x2e,0x8b,0x17,0xb4,0x09,0xcd,0x21";
}

